_type_: tp.observations
project: tp_observations
log: True    # wandb logging

run_setup: full
policy_selection_rule: ordered
temporal_pooler: union_tp
seed: 42

pipeline:
  - generator
  - temporal_memory
  - temporal_pooler
  - temporal_memory_2
  - temporal_pooler_2
#  - temporal_memory_3
  - temporal_pooler_3

run_setups:
  simple:
    n_sequences: 5
    n_observations_per_sequence: 10
    sequence_repeats: 3
    epochs: 2
    tp_output_sds: [400, 10]

  full:
    n_sequences: 5
    n_observations_per_sequence: 60
    sequence_repeats: 20
    epochs: 4
    tp_output_sds: [1000, 25]

generator:
  _type_: aai_rotation
  sds: [180, 4]
  filepath: distance.pkl

temporal_poolers:
  union_tp:
    _type_: UnionTp
    seed: ???
    # input
    inputDimensions: ???
    potentialRadius: ???
    potentialPct: 0.5
    globalInhibition: True
    # intermediate
    localAreaDensity: ???
    # output
    columnDimensions: ???
    maxUnionActivity: ???

    activeOverlapWeight: 1
    predictedActiveOverlapWeight: 2
    exciteFunctionType: Logistic
    decayFunctionType: Exponential
    decayTimeConst: 10.0
    synPermPredActiveInc: 0.1
    synPermPreviousPredActiveInc: 0.05
    historyLength: 20
    minHistory: 3
    boostStrength: 1.0
    dutyCyclePeriod: 40000
    minPctOverlapDutyCycle: 0.0002
    numActiveColumnsPerInhArea: 0
    stimulusThreshold: 3
    synPermConnected: 0.5
    synPermActiveInc: 0.1
    synPermInactiveDec: 0.01
    wrapAround: False

  ablation_utp:
    _type_: AblationUtp
    seed: ???
    # input
    inputDimensions: ???
    potentialRadius: ???
    potentialPct: 0.5
    globalInhibition: True
    # intermediate
    localAreaDensity: ???
    # output
    columnDimensions: ???
    maxUnionActivity: ???

    activeOverlapWeight: 1
    predictedActiveOverlapWeight: 2
    exciteFunctionType: Logistic
    decayFunctionType: Exponential
    decayTimeConst: 10.0
    synPermPredActiveInc: 0.1
    synPermPreviousPredActiveInc: 0.05
    historyLength: 20
    minHistory: 3
    boostStrength: 1.0
    dutyCyclePeriod: 40000
    minPctOverlapDutyCycle: 0.0002
    numActiveColumnsPerInhArea: 0
    stimulusThreshold: 3
    synPermConnected: 0.5
    synPermActiveInc: 0.1
    synPermInactiveDec: 0.01
    wrapAround: False
    # ablation
    first_boosting: False
    second_boosting: False
    untemporal_learning: True
    union_learning: True
    history_learning: True

  sandwich_tp:
    _type_: SandwichTp
    seed: ???
    initial_pooling: 1.
    pooling_decay: 0.05
    lower_sp_conf:
      # input
      inputDimensions: ???
      potentialRadius: ???
      potentialPct: 0.5
      globalInhibition: True
      # output
      columnDimensions: ???
      localAreaDensity: ???

      boostStrength: 1.0
      dutyCyclePeriod: 40000
      minPctOverlapDutyCycle: 0.0002
      numActiveColumnsPerInhArea: 0
      stimulusThreshold: 3
      synPermConnected: 0.5
      synPermActiveInc: 0.1
      synPermInactiveDec: 0.01
      wrapAround: False
    upper_sp_conf:
      # input: lower output
      inputDimensions: ???
      # output
      columnDimensions: ???
      localAreaDensity: ???

      potentialRadius: ???
      globalInhibition: True
      boostStrength: 1.0
      dutyCyclePeriod: 40000
      minPctOverlapDutyCycle: 0.0002
      numActiveColumnsPerInhArea: 0
      potentialPct: 0.5
      stimulusThreshold: 3
      synPermConnected: 0.5
      synPermActiveInc: 0.1
      synPermInactiveDec: 0.01
      wrapAround: False

temporal_memory:
  ff_sds: ???
  cells_per_column: 16
  fb_sds: [0, 0.]
  output_columns: True
  seed: ???

  # shared for both [recurrent] basal and apical
  activation_threshold: 0.85
  reduced_basal_threshold: 0.7
  learning_threshold: 0.6
  max_synapses_per_segment: 1.2
  initial_permanence: 0.46
  connected_threshold: 0.5
  permanence_increment: 0.05
  permanence_decrement: 0.02
  basal_predicted_segment_decrement: 0.001
  apical_predicted_segment_decrement: 0.001
